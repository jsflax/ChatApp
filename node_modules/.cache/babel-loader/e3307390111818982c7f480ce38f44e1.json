{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/jasonflax/Development/ChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/jasonflax/Development/ChatApp/src/components/ChatFeed.js\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 10px 14px;\\n  box-sizing: border-box;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  flex-grow: 1;\\n  box-sizing: border-box;\\n  overflow-y: scroll;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n/** @jsx jsx */\nimport { useEffect } from \"react\";\nimport { jsx } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport ChatMessage from \"./ChatMessage.js\";\nimport { animateScroll as scroll } from \"react-scroll\";\nimport { client } from \"../index.js\";\n\nvar ChatFeed = function ChatFeed(props) {\n  var messages = props.messages;\n  useEffect(function () {\n    scroll.scrollToBottom({\n      containerId: \"feed\",\n      duration: 320,\n      delay: 40\n    });\n  }, [messages]);\n\n  var isFromCurrentUser = function isFromCurrentUser(message) {\n    return !!message && message.ownerId === client.auth.user.id;\n  };\n\n  var isFromSameUser = function isFromSameUser(m1, m2) {\n    return m1.ownerId == m2.ownerId;\n  };\n\n  return jsx(ChatFeedLayout, {\n    id: \"feed\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, jsx(Feed, {\n    messages: messages,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, messages.map(function (m, i) {\n    var isFirst = i === 0;\n    var isLast = i === messages.length - 1;\n    var nextIsFromCurrentUser = isFromCurrentUser(messages[i + 1]) || false;\n    var shouldShowHeader = isFirst || !isFromSameUser(messages[i - 1], m);\n    var isLastFromUser = isLast || isFromCurrentUser(m) ? !nextIsFromCurrentUser : nextIsFromCurrentUser;\n    return jsx(ChatMessage, {\n      key: m._id,\n      message: m,\n      isFromCurrentUser: isFromCurrentUser(m),\n      shouldShowHeader: shouldShowHeader,\n      isFirstFromUser: shouldShowHeader,\n      isLastFromUser: isLastFromUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    });\n  })));\n};\n\nexport default ChatFeed;\nvar ChatFeedLayout = styled.div(_templateObject());\nvar Feed = styled.div(_templateObject2());","map":{"version":3,"sources":["/Users/jasonflax/Development/ChatApp/src/components/ChatFeed.js"],"names":["useEffect","jsx","styled","ChatMessage","animateScroll","scroll","client","ChatFeed","props","messages","scrollToBottom","containerId","duration","delay","isFromCurrentUser","message","ownerId","auth","user","id","isFromSameUser","m1","m2","map","m","i","isFirst","isLast","length","nextIsFromCurrentUser","shouldShowHeader","isLastFromUser","_id","ChatFeedLayout","div","Feed"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA,SAASA,SAAT,QAA0B,OAA1B;AACA,SAASC,GAAT,QAAoB,eAApB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,OAAOC,WAAP,MAAwB,kBAAxB;AACA,SAASC,aAAa,IAAIC,MAA1B,QAAwC,cAAxC;AACA,SAASC,MAAT,QAAuB,aAAvB;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAAC,KAAK,EAAI;AAAA,MAChBC,QADgB,GACHD,KADG,CAChBC,QADgB;AAExBT,EAAAA,SAAS,CACP,YAAM;AACJK,IAAAA,MAAM,CAACK,cAAP,CAAsB;AACpBC,MAAAA,WAAW,EAAE,MADO;AAEpBC,MAAAA,QAAQ,EAAE,GAFU;AAGpBC,MAAAA,KAAK,EAAE;AAHa,KAAtB;AAKD,GAPM,EAQP,CAACJ,QAAD,CARO,CAAT;;AAUA,MAAMK,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAC,OAAO,EAAI;AACnC,WAAO,CAAC,CAACA,OAAF,IAAaA,OAAO,CAACC,OAAR,KAAoBV,MAAM,CAACW,IAAP,CAAYC,IAAZ,CAAiBC,EAAzD;AACD,GAFD;;AAGA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,EAAD,EAAKC,EAAL,EAAW;AAChC,WAAOD,EAAE,CAACL,OAAH,IAAcM,EAAE,CAACN,OAAxB;AACD,GAFD;;AAGA,SACE,IAAC,cAAD;AAAgB,IAAA,EAAE,EAAC,MAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,IAAC,IAAD;AAAM,IAAA,QAAQ,EAAEP,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,QAAQ,CAACc,GAAT,CAAa,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACtB,QAAMC,OAAO,GAAGD,CAAC,KAAK,CAAtB;AACA,QAAME,MAAM,GAAGF,CAAC,KAAKhB,QAAQ,CAACmB,MAAT,GAAkB,CAAvC;AACA,QAAMC,qBAAqB,GACzBf,iBAAiB,CAACL,QAAQ,CAACgB,CAAC,GAAG,CAAL,CAAT,CAAjB,IAAsC,KADxC;AAEA,QAAMK,gBAAgB,GAAGJ,OAAO,IAAI,CAACN,cAAc,CAACX,QAAQ,CAACgB,CAAC,GAAG,CAAL,CAAT,EAAkBD,CAAlB,CAAnD;AACA,QAAMO,cAAc,GAClBJ,MAAM,IAAIb,iBAAiB,CAACU,CAAD,CAA3B,GACI,CAACK,qBADL,GAEIA,qBAHN;AAIA,WACE,IAAC,WAAD;AACE,MAAA,GAAG,EAAEL,CAAC,CAACQ,GADT;AAEE,MAAA,OAAO,EAAER,CAFX;AAGE,MAAA,iBAAiB,EAAEV,iBAAiB,CAACU,CAAD,CAHtC;AAIE,MAAA,gBAAgB,EAAEM,gBAJpB;AAKE,MAAA,eAAe,EAAEA,gBALnB;AAME,MAAA,cAAc,EAAEC,cANlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAUD,GApBA,CADH,CADF,CADF;AA2BD,CA7CD;;AA8CA,eAAexB,QAAf;AAEA,IAAM0B,cAAc,GAAG/B,MAAM,CAACgC,GAAV,mBAApB;AAMA,IAAMC,IAAI,GAAGjC,MAAM,CAACgC,GAAV,oBAAV","sourcesContent":["/** @jsx jsx */\nimport { useEffect } from \"react\";\nimport { jsx } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport ChatMessage from \"./ChatMessage.js\";\nimport { animateScroll as scroll } from \"react-scroll\";\nimport { client } from \"../index.js\";\n\nconst ChatFeed = props => {\n  const { messages } = props;\n  useEffect(\n    () => {\n      scroll.scrollToBottom({\n        containerId: \"feed\",\n        duration: 320,\n        delay: 40,\n      });\n    },\n    [messages],\n  );\n  const isFromCurrentUser = message => {\n    return !!message && message.ownerId === client.auth.user.id;\n  };\n  const isFromSameUser = (m1, m2)=> {\n    return m1.ownerId == m2.ownerId;\n  }\n  return (\n    <ChatFeedLayout id=\"feed\">\n      <Feed messages={messages}>\n        {messages.map((m, i) => {\n          const isFirst = i === 0;\n          const isLast = i === messages.length - 1;\n          const nextIsFromCurrentUser =\n            isFromCurrentUser(messages[i + 1]) || false;\n          const shouldShowHeader = isFirst || !isFromSameUser(messages[i - 1], m);\n          const isLastFromUser =\n            isLast || isFromCurrentUser(m)\n              ? !nextIsFromCurrentUser\n              : nextIsFromCurrentUser;\n          return (\n            <ChatMessage\n              key={m._id}\n              message={m}\n              isFromCurrentUser={isFromCurrentUser(m)}\n              shouldShowHeader={shouldShowHeader}\n              isFirstFromUser={shouldShowHeader}\n              isLastFromUser={isLastFromUser}\n            />\n          );\n        })}\n      </Feed>\n    </ChatFeedLayout>\n  );\n};\nexport default ChatFeed;\n\nconst ChatFeedLayout = styled.div`\n  width: 100%;\n  flex-grow: 1;\n  box-sizing: border-box;\n  overflow-y: scroll;\n`;\nconst Feed = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 10px 14px;\n  box-sizing: border-box;\n`;\n"]},"metadata":{},"sourceType":"module"}