{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/jasonflax/Development/ChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _regeneratorRuntime from \"/Users/jasonflax/Development/ChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jasonflax/Development/ChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jasonflax/Development/ChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"/Users/jasonflax/Development/ChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jasonflax/Development/ChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"/Users/jasonflax/Development/ChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/jasonflax/Development/ChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jasonflax/Development/ChatApp/src/components/LoginView.js\";\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  display: block;\\n  border-radius: 12px;\\n  border-top-left-radius: \\\"12px\\\";\\n  border-top-right-radius: \\\"12px\\\"\\n  border-bottom-left-radius: \\\"12px\\\"\\n  border-bottom-right-radius: \\\"12px\\\"\\n  padding: 10px;\\n  padding-left: 8px;\\n  padding-right: 8px;\\n  border: solid;\\n  border-width: 2px;\\n  border-radius: 4px;\\n  flex-grow: 1;\\n  line-height: 24px;\\n  font-size: 16px;\\n  background-color: green;\\n  color: white;\\n  box-shadow: 5px 10px;\\n  margin: auto;\\n  width: 50%;\\n  &:focus {\\n    outline: 0;\\n    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.5);\\n  }\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  display: block;\\n  border-radius: 12px;\\n  border-top-left-radius: \\\"12px\\\";\\n  border-top-right-radius: \\\"12px\\\"\\n  border-bottom-left-radius: \\\"12px\\\"\\n  border-bottom-right-radius: \\\"12px\\\"\\n  padding: 10px;\\n  padding-left: 8px;\\n  padding-right: 8px;\\n  border: solid;\\n  border-width: 1px;\\n  border-radius: 4px;\\n  flex-grow: 1;\\n  line-height: 24px;\\n  font-size: 16px;\\n  background-color: white;\\n  margin: auto;\\n  width: 50%;\\n  &:focus {\\n    outline: 0;\\n    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.5);\\n  }\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\nwidth: 100%;\\nheight: 30vh;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\ntext-align: center;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\nmargin: auto;\\nwidth: 50%;\\nborder: 3px solid green;\\npadding: 10px;\\nbackground-color: white;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  width: 100%;\\n  height: 100vh;\\n  max-height: 100vh;\\n  background-color: blue;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n/** @jsx jsx */\nimport { jsx } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport { client, usersCollection } from \"../index\";\nimport ChatRoom from \"./ChatRoom\";\nimport { AnonymousCredential } from 'mongodb-stitch-browser-sdk';\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { User } from \"../model/User\";\n/* This component manages the state of the entire chat room.\n * NOTE: Requires a logged in Stitch user\n */\n\nvar LoginView =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(LoginView, _React$Component);\n\n  _createClass(LoginView, [{\n    key: \"onLogin\",\n    value: function () {\n      var _onLogin = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var stitchUser, rootElement;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(this);\n\n                if (!(this.state.inputValue.length < 3 || this.state.inputValue.isEmpty())) {\n                  _context.next = 3;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 3:\n                _context.next = 5;\n                return client.auth.loginWithCredential(new AnonymousCredential());\n\n              case 5:\n                stitchUser = _context.sent;\n                _context.next = 8;\n                return usersCollection.insertOne(User(stitchUser.id, this.state.inputValue, null, Math.floor(Math.random() * Math.floor(7)), [\"default\"]));\n\n              case 8:\n                rootElement = document.getElementById(\"root\");\n                ReactDOM.render(jsx(ChatRoom, {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 33\n                  },\n                  __self: this\n                }), rootElement);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function onLogin() {\n        return _onLogin.apply(this, arguments);\n      }\n\n      return onLogin;\n    }()\n  }, {\n    key: \"updateInputValue\",\n    value: function updateInputValue(evt) {\n      this.setState({\n        inputValue: evt.target.value\n      });\n    }\n  }]);\n\n  function LoginView(props) {\n    var _this;\n\n    _classCallCheck(this, LoginView);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginView).call(this, props));\n    _this.state = {\n      inputValue: ''\n    };\n    return _this;\n  }\n\n  _createClass(LoginView, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return jsx(ChatLayout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, jsx(LinearLayout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, jsx(ChitChat, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, \"chit chat\"), jsx(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }), jsx(LoginInput, {\n        placeholder: \"username\",\n        style: {\n          marginBottom: 20 + \"px\"\n        },\n        value: this.state.inputValue,\n        onChange: function onChange(evt) {\n          return _this2.updateInputValue(evt);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }), jsx(LoginButton, {\n        onClick: this.onLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"login\")));\n    }\n  }]);\n\n  return LoginView;\n}(React.Component);\n\nexport { LoginView as default };\nvar ChatLayout = styled.div(_templateObject());\nvar LinearLayout = styled.div(_templateObject2());\nvar ChitChat = styled.p(_templateObject3());\nvar Block = styled.div(_templateObject4());\nvar LoginInput = styled(\"input\")(_templateObject5());\nvar LoginButton = styled(\"button\")(_templateObject6());","map":{"version":3,"sources":["/Users/jasonflax/Development/ChatApp/src/components/LoginView.js"],"names":["jsx","styled","client","usersCollection","ChatRoom","AnonymousCredential","React","ReactDOM","User","LoginView","console","log","state","inputValue","length","isEmpty","auth","loginWithCredential","stitchUser","insertOne","id","Math","floor","random","rootElement","document","getElementById","render","evt","setState","target","value","props","marginBottom","updateInputValue","onLogin","Component","ChatLayout","div","LinearLayout","ChitChat","p","Block","LoginInput","LoginButton"],"mappings":"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","sourcesContent":["/** @jsx jsx */\nimport { jsx } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport { client, usersCollection } from \"../index\";\nimport ChatRoom from \"./ChatRoom\";\nimport { AnonymousCredential } from 'mongodb-stitch-browser-sdk';\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { User } from \"../model/User\";\n\n/* This component manages the state of the entire chat room.\n * NOTE: Requires a logged in Stitch user\n */\nexport default class LoginView extends React.Component {\n  async onLogin() {  \n    console.log(this);\n    if (this.state.inputValue.length < 3\n      || this.state.inputValue.isEmpty()) {\n      return\n    }\n\n    const stitchUser = await client.auth.loginWithCredential(new AnonymousCredential());\n    await usersCollection.insertOne(\n      User(\n        stitchUser.id,\n        this.state.inputValue, \n        null, \n        Math.floor(Math.random() * Math.floor(7)),\n        [\"default\"]\n      ));\n\n    const rootElement = document.getElementById(\"root\");\n\t  ReactDOM.render(<ChatRoom />, rootElement);\n  }\n\n  updateInputValue(evt) {\n    this.setState({\n      inputValue: evt.target.value\n    });\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputValue: ''\n    };\n  }\n  \n  render() {\n    return (\n      <ChatLayout>\n        <LinearLayout>\n          <ChitChat>chit chat</ChitChat>\n          <Block />\n          <LoginInput placeholder=\"username\"\n            style={{marginBottom: 20 + \"px\"}} \n            value={this.state.inputValue} \n            onChange={evt => this.updateInputValue(evt)} />\n          <LoginButton onClick={this.onLogin}>login</LoginButton>\n        </LinearLayout>\n      </ChatLayout>\n    );\n  }\n}\n\nconst ChatLayout = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100vh;\n  max-height: 100vh;\n  background-color: blue;\n`;\n\nconst LinearLayout = styled.div`\nmargin: auto;\nwidth: 50%;\nborder: 3px solid green;\npadding: 10px;\nbackground-color: white;\n`;\n\nconst ChitChat = styled.p`\ntext-align: center;\n`;\n\nconst Block = styled.div`\nwidth: 100%;\nheight: 30vh;\n`;\nconst LoginInput = styled(\"input\")`\n  display: block;\n  border-radius: 12px;\n  border-top-left-radius: \"12px\";\n  border-top-right-radius: \"12px\"\n  border-bottom-left-radius: \"12px\"\n  border-bottom-right-radius: \"12px\"\n  padding: 10px;\n  padding-left: 8px;\n  padding-right: 8px;\n  border: solid;\n  border-width: 1px;\n  border-radius: 4px;\n  flex-grow: 1;\n  line-height: 24px;\n  font-size: 16px;\n  background-color: white;\n  margin: auto;\n  width: 50%;\n  &:focus {\n    outline: 0;\n    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.5);\n  }\n`;\n\nconst LoginButton = styled(\"button\")`\n  display: block;\n  border-radius: 12px;\n  border-top-left-radius: \"12px\";\n  border-top-right-radius: \"12px\"\n  border-bottom-left-radius: \"12px\"\n  border-bottom-right-radius: \"12px\"\n  padding: 10px;\n  padding-left: 8px;\n  padding-right: 8px;\n  border: solid;\n  border-width: 2px;\n  border-radius: 4px;\n  flex-grow: 1;\n  line-height: 24px;\n  font-size: 16px;\n  background-color: green;\n  color: white;\n  box-shadow: 5px 10px;\n  margin: auto;\n  width: 50%;\n  &:focus {\n    outline: 0;\n    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.5);\n  }\n`;"]},"metadata":{},"sourceType":"module"}