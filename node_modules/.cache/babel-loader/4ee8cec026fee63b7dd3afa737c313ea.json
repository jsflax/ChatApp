{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/jasonflax/Development/ChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _regeneratorRuntime from \"/Users/jasonflax/Development/ChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jasonflax/Development/ChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/jasonflax/Development/ChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"/Users/jasonflax/Development/ChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jasonflax/Development/ChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"/Users/jasonflax/Development/ChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/jasonflax/Development/ChatApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jasonflax/Development/ChatApp/src/components/ChatMessage.js\";\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteral([\"\\n          margin-left: \", \";\\n          margin-right: \", \";\\n          font-size: 12px;\\n          font-style: italic;\\n          padding-bottom: 4px;\\n        \"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\n        display: flex;\\n        flex-direction: row;\\n      \"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n    width: 50px;\\n    height: 50px;\\n    margin-left: 10px;\\n    margin-right: 10px;\\n    border-radius: 5px;\\n    border-color: \\\"lightgrey\\\"\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  display: inline-block;\\n  background-color: \", \";\\n  border-radius: 12px;\\n  margin-left: \", \";\\n  margin-right: \", \";\\n  border-top-left-radius: \", \";\\n  border-top-right-radius: \", \";\\n  border-bottom-left-radius: \", \";\\n  border-bottom-right-radius: \", \";\\n  padding: 10px;\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  display: inline-block;\\n  margin-right: 10px;\\n  font-size: 12px;\\n  margin-left: \", \";\\n  margin-right: \", \";\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  height: 100%;\\n  display: flex;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  margin: 6px 12px;\\n  margin-top: \", \";\\n  margin-bottom: \", \";\\n  background-color: white;\\n  display: flex;\\n  // align-items: flex-end;\\n  flex-direction: \", \";\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n                white-space: pre-wrap;\\n              \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n/** @jsx jsx */\nimport React from \"react\";\nimport { css, jsx } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport format from \"date-fns/format\";\nimport { usersObserver } from \"../models\";\nimport { defaultAvatars } from \"..\";\n\nvar ChatMessage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ChatMessage, _React$Component);\n\n  _createClass(ChatMessage, [{\n    key: \"observeUser\",\n    value: function () {\n      var _observeUser = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                usersObserver.subscribe(function (event) {\n                  if (event.operationType != \"update\" || event.fullDocument.ownerId != _this2.props.message.ownerId) {\n                    return;\n                  }\n\n                  _this2.state = {\n                    user: event.fullDocument\n                  };\n\n                  _this2.setState(_this2.state);\n                });\n                _context.next = 3;\n                return usersObserver.sync(this.props.message.ownerId);\n\n              case 3:\n                _context.t0 = _context.sent;\n                this.state = {\n                  user: _context.t0\n                };\n                this.setState(this.state);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function observeUser() {\n        return _observeUser.apply(this, arguments);\n      }\n\n      return observeUser;\n    }()\n  }]);\n\n  function ChatMessage(props) {\n    var _this;\n\n    _classCallCheck(this, ChatMessage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ChatMessage).call(this, props));\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(ChatMessage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.observeUser();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var direction = this.props.isFromCurrentUser ? \"right\" : \"left\";\n      var _this$props = this.props,\n          isLastFromUser = _this$props.isLastFromUser,\n          isFirstFromUser = _this$props.isFirstFromUser,\n          shouldShowHeader = _this$props.shouldShowHeader;\n      var _this$props$message = this.props.message,\n          sentAt = _this$props$message.sentAt,\n          content = _this$props$message.content;\n      var avatar = this.state.user && this.state.user.avatar ? 'data:image/jpeg;base64,' + this.state.user.avatar.buffer.toString('base64') : this.state.user ? defaultAvatars(this.state.user.defaultAvatarOrdinal) : \"img/mind_map_icn_3.png\";\n      return jsx(Layout, {\n        isLastFromUser: isLastFromUser,\n        isFirstFromUser: isFirstFromUser,\n        isFromCurrentUser: this.props.isFromCurrentUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, jsx(Avatar, {\n        src: shouldShowHeader ? avatar : \"http://upload.wikimedia.org/wikipedia/commons/c/ce/Transparent.gif\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }), jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, shouldShowHeader && jsx(Sender, {\n        direction: direction,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, this.state.user ? this.state.user.name : \"\"), jsx(Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, jsx(Message, {\n        direction: direction,\n        hasNext: !isLastFromUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, jsx(Timestamp, {\n        direction: direction,\n        ts: sentAt,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }), jsx(\"div\", {\n        css: css(_templateObject()),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, content)))));\n    }\n  }]);\n\n  return ChatMessage;\n}(React.Component);\n\nexport { ChatMessage as default };\nvar Layout = styled.div(_templateObject2(), function (props) {\n  return props.isFirstFromUser ? \"6px\" : \"1px\";\n}, function (props) {\n  return props.isLastFromUser ? \"6px\" : \"1px\";\n}, function (props) {\n  return props.isFromCurrentUser ? \"row-reverse\" : \"row\";\n});\nvar Content = styled.div(_templateObject3());\nvar Sender = styled.p(_templateObject4(), function (props) {\n  return props.direction === \"left\" ? \"0px\" : \"auto\";\n}, function (props) {\n  return props.direction === \"right\" ? \"0px\" : \"auto\";\n});\nvar Message = styled.div(_templateObject5(), function (props) {\n  return props.direction === \"left\" ? \"lightgrey\" : \"lightblue\";\n}, function (props) {\n  return props.direction === \"left\" ? \"0px\" : \"auto\";\n}, function (props) {\n  return props.direction === \"right\" ? \"0px\" : \"auto\";\n}, function (props) {\n  return props.direction === \"left\" ? \"0px\" : \"12px\";\n}, function (props) {\n  return props.direction === \"right\" ? \"0px\" : \"12px\";\n}, function (props) {\n  return props.direction === \"left\" ? props.hasNext && \"0px\" : \"12px\";\n}, function (props) {\n  return props.direction === \"right\" ? props.hasNext && \"0px\" : \"12px\";\n});\nvar Avatar = styled.img(_templateObject6());\n\nvar Timestamp = function Timestamp(props) {\n  var direction = props.direction;\n  var date = new Date(props.ts);\n\n  var MessageDate = function MessageDate(props) {\n    var formatted = format(date, \"MM/DD/YYYY\");\n    var dateStyle = css(_templateObject7());\n    return jsx(\"span\", {\n      css: dateStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, formatted);\n  };\n\n  var MessageTime = function MessageTime(props) {\n    var formatted = format(date, \"HH:MM:SS A\");\n    var timeStyle = css(_templateObject8());\n    return jsx(\"span\", {\n      css: timeStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, formatted);\n  };\n\n  return jsx(\"div\", {\n    css: css(_templateObject9()),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, jsx(\"div\", {\n    css: css(_templateObject10(), direction === \"left\" ? \"0px\" : \"auto\", direction === \"right\" ? \"0px\" : \"auto\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, jsx(MessageDate, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }), \"@\", jsx(MessageTime, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  })));\n};","map":{"version":3,"sources":["/Users/jasonflax/Development/ChatApp/src/components/ChatMessage.js"],"names":["React","css","jsx","styled","format","usersObserver","defaultAvatars","ChatMessage","subscribe","event","operationType","fullDocument","ownerId","props","message","state","user","setState","sync","observeUser","direction","isFromCurrentUser","isLastFromUser","isFirstFromUser","shouldShowHeader","sentAt","content","avatar","buffer","toString","defaultAvatarOrdinal","name","Component","Layout","div","Content","Sender","p","Message","hasNext","Avatar","img","Timestamp","date","Date","ts","MessageDate","formatted","dateStyle","MessageTime","timeStyle"],"mappings":"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","sourcesContent":["/** @jsx jsx */\nimport React from \"react\";\nimport { css, jsx } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport format from \"date-fns/format\";\nimport { usersObserver } from \"../models\";\nimport { defaultAvatars } from \"..\";\n\nexport default class ChatMessage extends React.Component {\n\n  async observeUser() {\n    usersObserver.subscribe(event => {\n      if (event.operationType != \"update\" || event.fullDocument.ownerId != this.props.message.ownerId) {\n        return;\n      }\n\n      this.state = {\n        user: event.fullDocument\n      }\n      \n      this.setState(this.state);\n    });\n\n    this.state = {\n      user: await usersObserver.sync(this.props.message.ownerId)\n    }\n    \n    this.setState(this.state);\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    this.observeUser();\n  }\n\n  render() {\n    const direction = this.props.isFromCurrentUser ? \"right\" : \"left\";\n    const { isLastFromUser, isFirstFromUser, shouldShowHeader } = this.props;\n    const { sentAt, content } = this.props.message;\n    const avatar = this.state.user && this.state.user.avatar ? 'data:image/jpeg;base64,' + \n      this.state.user.avatar.buffer.toString('base64') : \n        this.state.user ? defaultAvatars(this.state.user.defaultAvatarOrdinal) : \"img/mind_map_icn_3.png\";    \n    return (\n      <Layout isLastFromUser={isLastFromUser} isFirstFromUser={isFirstFromUser} isFromCurrentUser={this.props.isFromCurrentUser}>\n          <Avatar src={shouldShowHeader ? avatar : \"http://upload.wikimedia.org/wikipedia/commons/c/ce/Transparent.gif\"}/>\n\n          <div>\n          {shouldShowHeader && (<Sender direction={direction}>{this.state.user ? this.state.user.name : \"\"}</Sender>)}\n          <Content>\n          <Message direction={direction} hasNext={!isLastFromUser}>\n            <Timestamp direction={direction} ts={sentAt} />\n            <div\n              css={css`\n                white-space: pre-wrap;\n              `}\n            >\n              {content}\n            </div>\n          </Message>\n        </Content>\n        </div>\n        \n      </Layout>\n    );\n  }\n}\nconst Layout = styled.div`\n  margin: 6px 12px;\n  margin-top: ${props => (props.isFirstFromUser ? \"6px\" : \"1px\")};\n  margin-bottom: ${props => (props.isLastFromUser ? \"6px\" : \"1px\")};\n  background-color: white;\n  display: flex;\n  // align-items: flex-end;\n  flex-direction: ${props => (props.isFromCurrentUser ? \"row-reverse\" : \"row\")};\n`;\nconst Content = styled.div`\n  height: 100%;\n  display: flex;\n`;\nconst Sender = styled.p`\n  display: inline-block;\n  margin-right: 10px;\n  font-size: 12px;\n  margin-left: ${props => (props.direction === \"left\" ? \"0px\" : \"auto\")};\n  margin-right: ${props => (props.direction === \"right\" ? \"0px\" : \"auto\")};\n`;\nconst Message = styled.div`\n  display: inline-block;\n  background-color: ${props =>\n    props.direction === \"left\" ? \"lightgrey\" : \"lightblue\"};\n  border-radius: 12px;\n  margin-left: ${props => (props.direction === \"left\" ? \"0px\" : \"auto\")};\n  margin-right: ${props => (props.direction === \"right\" ? \"0px\" : \"auto\")};\n  border-top-left-radius: ${props =>\n    props.direction === \"left\" ? \"0px\" : \"12px\"};\n  border-top-right-radius: ${props =>\n    props.direction === \"right\" ? \"0px\" : \"12px\"};\n  border-bottom-left-radius: ${props =>\n    props.direction === \"left\" ? props.hasNext && \"0px\" : \"12px\"};\n  border-bottom-right-radius: ${props =>\n    props.direction === \"right\" ? props.hasNext && \"0px\" : \"12px\"};\n  padding: 10px;\n`;\nconst Avatar = styled.img`\n    width: 50px;\n    height: 50px;\n    margin-left: 10px;\n    margin-right: 10px;\n    border-radius: 5px;\n    border-color: \"lightgrey\"\n`;\n\nconst Timestamp = props => {\n  const direction = props.direction;\n  const date = new Date(props.ts);\n  const MessageDate = props => {\n    const formatted = format(date, \"MM/DD/YYYY\");\n    const dateStyle = css``;\n    return <span css={dateStyle}>{formatted}</span>;\n  };\n  const MessageTime = props => {\n    const formatted = format(date, \"HH:MM:SS A\");\n    const timeStyle = css``;\n    return <span css={timeStyle}>{formatted}</span>;\n  };\n  return (\n    <div\n      css={css`\n        display: flex;\n        flex-direction: row;\n      `}\n    >\n      <div\n        css={css`\n          margin-left: ${direction === \"left\" ? \"0px\" : \"auto\"};\n          margin-right: ${direction === \"right\" ? \"0px\" : \"auto\"};\n          font-size: 12px;\n          font-style: italic;\n          padding-bottom: 4px;\n        `}\n      >\n        <MessageDate />@<MessageTime />\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}